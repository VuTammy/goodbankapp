{"ast":null,"code":"import _slicedToArray from\"/Users/tammyvu/Desktop/goodbank/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Card from\"./context.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Balance(){var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),show=_React$useState2[0],setShow=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),status=_React$useState4[0],setStatus=_React$useState4[1];return/*#__PURE__*/_jsx(Card,{bgcolor:\"light\",txtcolor:\"black\",header:\"Balance\",cardWidth:\"40%\",status:status,body:show?/*#__PURE__*/_jsx(BalanceForm,{setShow:setShow,setStatus:setStatus}):/*#__PURE__*/_jsx(BalanceMsg,{setShow:setShow,setStatus:setStatus})});}function BalanceMsg(props){var currentBalance=localStorage.getItem('balance');var name=localStorage.getItem('name');return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"Thank you for banking with us \",name,\"!\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Your current account balance is $\",currentBalance]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-danger\",onClick:function onClick(){props.setShow(true);props.setStatus('');},children:\"Check balance again\"})]});}function BalanceForm(props){var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),email=_React$useState6[0],setEmail=_React$useState6[1];// const [balance, setBalance] = React.useState(''); \nfunction handle(){fetch(\"/account/findOne/\".concat(email)).then(function(response){return response.text();}).then(function(text){try{var data=JSON.parse(text);props.setStatus(false);props.setShow(false);console.log('JSON:',data);}catch(err){props.setStatus('Not a valid email. Please try again.');setTimeout(function(){return props.setStatus('');},3000);console.log('err:',text);}});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"This page allows you to check your balance. Enter the account email to get started.\"})}),/*#__PURE__*/_jsx(\"br\",{}),\"Email\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"input\",className:\"form-control\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.currentTarget.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-danger\",onClick:handle,children:\"Check Balance\"})]});}export default Balance;","map":{"version":3,"names":["React","Card","Balance","useState","show","setShow","status","setStatus","BalanceMsg","props","currentBalance","localStorage","getItem","name","BalanceForm","email","setEmail","handle","fetch","then","response","text","data","JSON","parse","console","log","err","setTimeout","e","currentTarget","value"],"sources":["/Users/tammyvu/Desktop/goodbank/src/components/balance.js"],"sourcesContent":["import React from \"react\";\nimport Card from \"./context.js\";\n\nfunction Balance(){\n  const [show, setShow]     = React.useState(true);\n  const [status, setStatus] = React.useState('');  \n\n  return (\n    <Card\n      bgcolor=\"light\"\n      txtcolor=\"black\"\n      header=\"Balance\"\n      cardWidth='40%'\n      status={status}\n      body={show ?\n        <BalanceForm setShow={setShow} setStatus={setStatus}/> :\n        <BalanceMsg setShow={setShow} setStatus={setStatus}/>}\n    />\n  )\n\n}\n\nfunction BalanceMsg(props){\n  var currentBalance = localStorage.getItem('balance');\n  var name = localStorage.getItem('name');\n\n  return(<>\n    <h5>Thank you for banking with us {name}!</h5><br/>\n    <h5>Your current account balance is ${currentBalance}</h5><br/>\n    <button type=\"submit\" \n      className=\"btn btn-danger\" \n      onClick={() => {\n        props.setShow(true);\n        props.setStatus('');\n      }}>\n        Check balance again\n    </button>\n  </>);\n}\n\nfunction BalanceForm(props){\n  const [email, setEmail]   = React.useState('');\n  // const [balance, setBalance] = React.useState(''); \n\n  function handle(){\n    fetch(`/account/findOne/${email}`)\n    .then(response => response.text())\n    .then(text => {\n        try {\n            const data = JSON.parse(text);\n            props.setStatus(false);\n            props.setShow(false);\n            console.log('JSON:', data);\n        } catch(err) {\n            props.setStatus('Not a valid email. Please try again.')\n            setTimeout(() => props.setStatus(''),3000);\n            console.log('err:', text);\n        }\n    });\n  }\n\n  return (<>\n\n    <center><b>This page allows you to check your balance. Enter the account email to get started.</b></center>\n    <br/>\n\n    Email<br/>\n    <input type=\"input\" \n      className=\"form-control\" \n      placeholder=\"Enter email\" \n      value={email} \n      onChange={e => setEmail(e.currentTarget.value)}/><br/>\n\n    <button type=\"submit\" \n      className=\"btn btn-danger\" \n      onClick={handle}>Check Balance</button>\n\n  </>);\n}\n\nexport default Balance;"],"mappings":"qHAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAOC,KAAI,KAAM,cAAc,CAAC,6IAEhC,QAASC,QAAO,EAAE,CAChB,oBAA4BF,KAAK,CAACG,QAAQ,CAAC,IAAI,CAAC,oDAAzCC,IAAI,qBAAEC,OAAO,qBACpB,qBAA4BL,KAAK,CAACG,QAAQ,CAAC,EAAE,CAAC,qDAAvCG,MAAM,qBAAEC,SAAS,qBAExB,mBACE,KAAC,IAAI,EACH,OAAO,CAAC,OAAO,CACf,QAAQ,CAAC,OAAO,CAChB,MAAM,CAAC,SAAS,CAChB,SAAS,CAAC,KAAK,CACf,MAAM,CAAED,MAAO,CACf,IAAI,CAAEF,IAAI,cACR,KAAC,WAAW,EAAC,OAAO,CAAEC,OAAQ,CAAC,SAAS,CAAEE,SAAU,EAAE,cACtD,KAAC,UAAU,EAAC,OAAO,CAAEF,OAAQ,CAAC,SAAS,CAAEE,SAAU,EAAG,EACxD,CAGN,CAEA,QAASC,WAAU,CAACC,KAAK,CAAC,CACxB,GAAIC,eAAc,CAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CACpD,GAAIC,KAAI,CAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAEvC,mBAAO,wCACL,uDAAmCC,IAAI,OAAO,2BAAK,cACnD,0DAAsCH,cAAc,GAAM,2BAAK,cAC/D,eAAQ,IAAI,CAAC,QAAQ,CACnB,SAAS,CAAC,gBAAgB,CAC1B,OAAO,CAAE,kBAAM,CACbD,KAAK,CAACJ,OAAO,CAAC,IAAI,CAAC,CACnBI,KAAK,CAACF,SAAS,CAAC,EAAE,CAAC,CACrB,CAAE,iCAEK,GACR,CACL,CAEA,QAASO,YAAW,CAACL,KAAK,CAAC,CACzB,qBAA4BT,KAAK,CAACG,QAAQ,CAAC,EAAE,CAAC,qDAAvCY,KAAK,qBAAEC,QAAQ,qBACtB;AAEA,QAASC,OAAM,EAAE,CACfC,KAAK,4BAAqBH,KAAK,EAAG,CACjCI,IAAI,CAAC,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACjCF,IAAI,CAAC,SAAAE,IAAI,CAAI,CACV,GAAI,CACA,GAAMC,KAAI,CAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC,CAC7BZ,KAAK,CAACF,SAAS,CAAC,KAAK,CAAC,CACtBE,KAAK,CAACJ,OAAO,CAAC,KAAK,CAAC,CACpBoB,OAAO,CAACC,GAAG,CAAC,OAAO,CAAEJ,IAAI,CAAC,CAC9B,CAAE,MAAMK,GAAG,CAAE,CACTlB,KAAK,CAACF,SAAS,CAAC,sCAAsC,CAAC,CACvDqB,UAAU,CAAC,iBAAMnB,MAAK,CAACF,SAAS,CAAC,EAAE,CAAC,GAAC,IAAI,CAAC,CAC1CkB,OAAO,CAACC,GAAG,CAAC,MAAM,CAAEL,IAAI,CAAC,CAC7B,CACJ,CAAC,CAAC,CACJ,CAEA,mBAAQ,wCAEN,qCAAQ,0GAA0F,EAAS,cAC3G,aAAK,sBAEA,aAAK,cACV,cAAO,IAAI,CAAC,OAAO,CACjB,SAAS,CAAC,cAAc,CACxB,WAAW,CAAC,aAAa,CACzB,KAAK,CAAEN,KAAM,CACb,QAAQ,CAAE,kBAAAc,CAAC,QAAIb,SAAQ,CAACa,CAAC,CAACC,aAAa,CAACC,KAAK,CAAC,EAAC,EAAE,2BAAK,cAExD,eAAQ,IAAI,CAAC,QAAQ,CACnB,SAAS,CAAC,gBAAgB,CAC1B,OAAO,CAAEd,MAAO,2BAAuB,GAExC,CACL,CAEA,cAAef,QAAO"},"metadata":{},"sourceType":"module"}