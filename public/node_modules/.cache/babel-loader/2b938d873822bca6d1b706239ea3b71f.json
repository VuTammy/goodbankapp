{"ast":null,"code":"import _slicedToArray from\"/Users/tammyvu/Desktop/goodbank/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Card from\"./context.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Transfer(){var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),show=_React$useState2[0],setShow=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),status=_React$useState4[0],setStatus=_React$useState4[1];return/*#__PURE__*/_jsx(Card,{bgcolor:\"light\",txtcolor:\"black\",header:\"Transfer\",cardWidth:\"40%\",status:status,body:show?/*#__PURE__*/_jsx(TransferForm,{setShow:setShow,setStatus:setStatus}):/*#__PURE__*/_jsx(TransferMsg,{setShow:setShow,setStatus:setStatus})});}function TransferMsg(props){var currentBalance=localStorage.getItem('balance');return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"h5\",{children:\"Transfer successful! Your recipient should receive the payment immediately.\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsxs(\"em\",{children:[\"Your balance is now $\",currentBalance]})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-danger\",onClick:function onClick(){props.setShow(true);props.setStatus('');},children:\"Transfer again\"})]});}function TransferForm(props){var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),amount=_React$useState6[0],setAmount=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),recipientEmail=_React$useState8[0],setEmail=_React$useState8[1];var name=localStorage.getItem('name');var email=localStorage.getItem('email');function handle(){function validate(field,label){if(!field||amount<0){props.setStatus('Error: '+label);setTimeout(function(){return props.setStatus('');},3000);return false;}return true;}if(!validate(amount,'Not a valid input.'))return;fetch(\"/account/update/\".concat(email,\"/-\").concat(amount)).then(function(response){return response.text();}).then(function(text){try{var data=JSON.parse(text);props.setStatus(false);props.setShow(false);console.log('JSON:',data);console.log('more',data.value.balance);localStorage.setItem('balance',data.value.balance);}catch(err){props.setStatus('Transfer failed');setTimeout(function(){return props.setStatus('');},3000);console.log('err:',text);}});fetch(\"/account/update/\".concat(recipientEmail,\"/\").concat(amount)).then(function(response){return response.text();}).then(function(text){try{var data=JSON.parse(text);props.setStatus(false);props.setShow(false);console.log('JSON:',data);console.log('more',data.value.balance);localStorage.setItem('balance',data.value.balance);}catch(err){props.setStatus('Deposit failed');setTimeout(function(){return props.setStatus('');},3000);console.log('err:',text);}});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Money transfer is now available! Enter recipient and amount you would like to transfer.\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"em\",{children:[\"Sender: \",name]})}),/*#__PURE__*/_jsx(\"br\",{}),\"Recipient Email\",/*#__PURE__*/_jsx(\"input\",{type:\"input\",className:\"form-control\",placeholder:\"Enter email\",value:recipientEmail,onChange:function onChange(e){return setEmail(e.currentTarget.value);}}),/*#__PURE__*/_jsx(\"br\",{}),\"Transfer Amount\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Enter amount\",value:amount,onChange:function onChange(e){return setAmount(e.currentTarget.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-danger\",onClick:handle,children:\"Submit Transfer\"})]});}export default Transfer;","map":{"version":3,"names":["React","Card","Transfer","useState","show","setShow","status","setStatus","TransferMsg","props","currentBalance","localStorage","getItem","TransferForm","amount","setAmount","recipientEmail","setEmail","name","email","handle","validate","field","label","setTimeout","fetch","then","response","text","data","JSON","parse","console","log","value","balance","setItem","err","e","currentTarget"],"sources":["/Users/tammyvu/Desktop/goodbank/src/components/transfer.js"],"sourcesContent":["import React from \"react\";\nimport Card from \"./context.js\";\n\nfunction Transfer() {\n  const [show, setShow] = React.useState(true);\n  const [status, setStatus] = React.useState('');\n\n  return (\n    <Card\n      bgcolor=\"light\"\n      txtcolor=\"black\"\n      header=\"Transfer\"\n      cardWidth='40%'\n      status={status}\n      body={show ?\n          <TransferForm setShow={setShow} setStatus={setStatus} /> :\n          <TransferMsg setShow={setShow} setStatus={setStatus} />}\n    />\n  );\n}\n\nfunction TransferMsg(props){\n  var currentBalance = localStorage.getItem('balance');\n\n    return(<>\n      <center><h5>Transfer successful! Your recipient should receive the payment immediately.</h5></center>\n      <br/>\n      <center><h5><em>Your balance is now ${currentBalance}</em></h5></center>\n      <br/>\n      <button type=\"submit\" \n        className=\"btn btn-danger\" \n        onClick={() => {\n          props.setShow(true);\n          props.setStatus('');\n        }}>\n          Transfer again\n      </button>\n    </>);\n}\n\nfunction TransferForm(props){\n    const [amount, setAmount] = React.useState('');\n    const [recipientEmail, setEmail] = React.useState(\"\");\n    var name = localStorage.getItem('name');\n    var email = localStorage.getItem('email');\n  \n    function handle(){\n      function validate(field, label){\n        if (!field || amount < 0) {\n            props.setStatus('Error: ' + label);\n            setTimeout(() => props.setStatus(''),3000);\n            return false;\n        }\n        return true;\n      }\n      if (!validate(amount, 'Not a valid input.'))   return;\n      fetch(`/account/update/${email}/-${amount}`)\n      .then(response => response.text())\n      .then(text => {\n          try {\n              const data = JSON.parse(text);\n              props.setStatus(false);\n              props.setShow(false);\n              console.log('JSON:', data);\n              console.log('more', data.value.balance);\n              localStorage.setItem('balance', data.value.balance);\n          } catch(err) {\n              props.setStatus('Transfer failed')\n              setTimeout(() => props.setStatus(''),3000);\n              console.log('err:', text);\n          }\n      });\n      fetch(`/account/update/${recipientEmail}/${amount}`)\n      .then(response => response.text())\n      .then(text => {\n          try {\n              const data = JSON.parse(text);\n              props.setStatus(false);\n              props.setShow(false);\n              console.log('JSON:', data);\n              console.log('more', data.value.balance);\n              localStorage.setItem('balance', data.value.balance);\n          } catch(err) {\n              props.setStatus('Deposit failed')\n              setTimeout(() => props.setStatus(''),3000);\n              console.log('err:', text);\n          }\n      });\n    }\n  \n  \n    return(<>\n      <center><b>Money transfer is now available! Enter recipient and amount you would like to transfer.</b></center>\n      <br/>\n\n      <center><em>Sender: {name}</em></center>\n      <br/>\n\n      Recipient Email\n      <input type=\"input\"\n        className=\"form-control\"\n        placeholder=\"Enter email\"\n        value={recipientEmail} \n        onChange={(e) => setEmail(e.currentTarget.value)}/><br/>\n\n      Transfer Amount<br/>\n      <input type=\"number\" \n        className=\"form-control\" \n        placeholder=\"Enter amount\" \n        value={amount} \n        onChange={e => setAmount(e.currentTarget.value)}/><br/>\n  \n      <button type=\"submit\" \n        className=\"btn btn-danger\" \n        onClick={handle}>Submit Transfer</button>\n  \n    </>);\n  }\n\n  export default Transfer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}