{"ast":null,"code":"import _slicedToArray from\"/Users/tammyvu/Desktop/goodbank/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Card from\"./context.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var globalBalance=0;function Deposit(){var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),show=_React$useState2[0],setShow=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),status=_React$useState4[0],setStatus=_React$useState4[1];return/*#__PURE__*/_jsx(Card,{bgcolor:\"light\",txtcolor:\"black\",header:\"Deposit\",cardWidth:\"40%\",status:status,body:show?/*#__PURE__*/_jsx(DepositForm,{setShow:setShow,setStatus:setStatus}):/*#__PURE__*/_jsx(DepositMsg,{setShow:setShow,setStatus:setStatus})});}function DepositMsg(props){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"h5\",{children:[\"Deposit successful!\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"em\",{children:[\"New balance: $\",globalBalance]})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-danger\",onClick:function onClick(){props.setShow(true);props.setStatus('');},children:\"Deposit again\"})]});}function DepositForm(props){var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),amount=_React$useState6[0],setAmount=_React$useState6[1];globalBalance=localStorage.getItem('balance');var currentBalance=localStorage.getItem(globalBalance);var name=localStorage.getItem('name');var email=localStorage.getItem('email');function handle(){function validate(field,label){if(!field||amount<0){props.setStatus('Error: '+label);setTimeout(function(){return props.setStatus('');},3000);return false;}return true;}if(!validate(amount,'Not a valid input.'))return;fetch(\"/account/update/\".concat(email,\"/\").concat(amount)).then(function(response){return response.text();}).then(function(text){try{var data=JSON.parse(text);props.setStatus(false);props.setShow(false);console.log('JSON:',data);globalBalance=globalBalance+amount;console.log('more',data.value.balance);localStorage.setItem('balance',data.value.balance);}catch(err){props.setStatus('Deposit failed');console.log('err:',text);}});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"b\",{children:[\"Welcome \",name,\"! Use this page to deposit money into your account.\"]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"em\",{children:[\"Account Balance: $\",globalBalance]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Deposit Amount\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Enter amount\",value:amount,onChange:function onChange(e){return setAmount(e.currentTarget.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-danger\",onClick:handle,children:\"Submit Deposit\"})]});}export default Deposit;","map":{"version":3,"names":["React","Card","globalBalance","Deposit","useState","show","setShow","status","setStatus","DepositMsg","props","DepositForm","amount","setAmount","localStorage","getItem","currentBalance","name","email","handle","validate","field","label","setTimeout","fetch","then","response","text","data","JSON","parse","console","log","value","balance","setItem","err","e","currentTarget"],"sources":["/Users/tammyvu/Desktop/goodbank/src/components/deposit.js"],"sourcesContent":["import React from \"react\";\nimport Card from \"./context.js\";\n\nvar globalBalance = 0;\n\nfunction Deposit(){\n  const [show, setShow]     = React.useState(true);\n  const [status, setStatus] = React.useState(''); \n\n  return (\n    <Card\n      bgcolor=\"light\"\n      txtcolor=\"black\"\n      header=\"Deposit\"\n      cardWidth='40%'\n      status={status}\n      body={show ? \n        <DepositForm setShow={setShow} setStatus={setStatus}/> :\n        <DepositMsg setShow={setShow} setStatus={setStatus}/>}\n    />\n  )\n}\n\nfunction DepositMsg(props){\n  \n  return (<>\n        <center><h5>\n      Deposit successful!<br/><br/>\n      <em>New balance: ${globalBalance}</em>\n    </h5></center>\n    <button type=\"submit\" \n      className=\"btn btn-danger\" \n      onClick={() => {\n          props.setShow(true); \n          props.setStatus('');\n      }}>\n        Deposit again\n    </button>\n  </>);\n}\n\nfunction DepositForm(props){\n  const [amount, setAmount] = React.useState('');\n  globalBalance = localStorage.getItem('balance');\n  var currentBalance = localStorage.getItem(globalBalance);\n  var name = localStorage.getItem('name');\n  var email = localStorage.getItem('email');\n\n  function handle(){\n    function validate(field, label){\n      if (!field || amount < 0) {\n          props.setStatus('Error: ' + label);\n          setTimeout(() => props.setStatus(''),3000);\n          return false;\n      }\n      return true;\n    }\n    if (!validate(amount, 'Not a valid input.'))   return;\n    fetch(`/account/update/${email}/${amount}`)\n    .then(response => response.text())\n    .then(text => {\n        try {\n            const data = JSON.parse(text);\n            props.setStatus(false);\n            props.setShow(false);\n            console.log('JSON:', data);\n            globalBalance = globalBalance + amount;\n            console.log('more', data.value.balance);\n            localStorage.setItem('balance', data.value.balance);\n        } catch(err) {\n            props.setStatus('Deposit failed')\n            console.log('err:', text);\n        }\n    });\n  }\n\n  return(<>\n\n  <center><b>Welcome {name}! Use this page to deposit money into your account.</b></center>\n  <br/>\n\n    <em>Account Balance: ${globalBalance}</em>\n    <br/><br/>\n      \n    Deposit Amount<br/>\n    <input type=\"number\" \n      className=\"form-control\" \n      placeholder=\"Enter amount\" \n      value={amount} onChange={e => setAmount(e.currentTarget.value)}/><br/>\n\n    <button type=\"submit\" \n      className=\"btn btn-danger\" \n      onClick={handle}>Submit Deposit</button>\n\n  </>);\n}\n\nexport default Deposit;"],"mappings":"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"},"metadata":{},"sourceType":"module"}